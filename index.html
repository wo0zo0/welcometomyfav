<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>김건우 아카이브</title>
  <link rel="stylesheet" href="style.css?v=3">
</head>
<body>
  <button class="menu-btn" aria-label="menu">☰</button>
<button class="logo-btn" aria-label="home">UNNAMED</button>
  <nav class="menu" aria-label="menu">
    <button class="close-btn" aria-label="close">←</button>
    <ul>
      <li><a class="menu-link" href="#selfie">설표셀피</a></li>
      <li><a class="menu-link" href="#songs">추천곡</a></li>
    </ul>
  </nav>

  <main class="content">
    <section id="selfie" class="section">
      <h2>설표셀피</h2>
      <div class="grid">
  <img src="images/1.JPG">
  <img src="images/2.JPG">
  <img src="images/3.JPG">
  <img src="images/4.JPG">
  <img src="images/5.png">
  <img src="images/6.png">
  <img src="images/7.JPG">
  <img src="images/8.JPG">
</div>
    </section>

    <section id="songs" class="section">
      <h2>추천곡</h2>
      <p>여긴 나중에 채울거임</p>
    </section>
  </main>

  <script>
    const btn = document.querySelector('.menu-btn')
    const menu = document.querySelector('.menu')
    const close = document.querySelector('.close-btn')
    const links = document.querySelectorAll('.menu-link')

    function showOnly(hash) {
  document.querySelectorAll('.section').forEach(sec => {
    sec.style.display = 'none'
  })
  const target = document.querySelector(hash)
  if (target) target.style.display = 'block'
}

function openContentAndGo(hash) {
  document.body.classList.add('show-content')
  showOnly(hash)

  const target = document.querySelector(hash)
  setTimeout(() => {
    if (!target) return
    const y = target.getBoundingClientRect().top + window.pageYOffset
    window.scrollTo(0, y)
  }, 50)
}
    btn.addEventListener('click', () => {
      menu.classList.add('open')
    })

    close.addEventListener('click', () => {
      menu.classList.remove('open')
    })

    links.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault()
        const hash = link.getAttribute('href')
        menu.classList.remove('open')
        history.replaceState(null, "", hash)
        openContentAndGo(hash)
      })
    })

    if (location.hash) {
      openContentAndGo(location.hash)
    }
    const logoBtn = document.querySelector('.logo-btn')

logoBtn.addEventListener('click', () => {
  document.body.classList.remove('show-content')
  history.replaceState(null, "", location.pathname)
  window.scrollTo(0, 0)
})
    // ===== Lightbox (tap to fullscreen + swipe) =====
const lb = document.getElementById('lightbox')
const lbImg = document.getElementById('lbImg')
const lbClose = document.getElementById('lbClose')
const lbPrev = document.getElementById('lbPrev')
const lbNext = document.getElementById('lbNext')

let imgs = []
let current = 0

function setLb(i) {
  if (!imgs.length) return
  current = (i + imgs.length) % imgs.length
  lbImg.src = imgs[current].src
  lbImg.alt = imgs[current].alt || ''
}

function openLb(i) {
  imgs = Array.from(document.querySelectorAll('.grid img'))
  setLb(i)
  lb.classList.add('open')
  lb.setAttribute('aria-hidden', 'false')
  document.body.style.overflow = 'hidden'
}

function closeLb() {
  lb.classList.remove('open')
  lb.setAttribute('aria-hidden', 'true')
  document.body.style.overflow = ''
  lbImg.src = ''
}

document.querySelectorAll('.grid img').forEach((img, i) => {
  img.style.cursor = 'pointer'
  img.addEventListener('click', () => openLb(i))
})

lbClose.addEventListener('click', closeLb)
lb.addEventListener('click', (e) => {
  if (e.target === lb) closeLb()
})

lbPrev.addEventListener('click', () => setLb(current - 1))
lbNext.addEventListener('click', () => setLb(current + 1))

// swipe
let startX = 0
let startY = 0

lb.addEventListener('touchstart', (e) => {
  const t = e.touches[0]
  startX = t.clientX
  startY = t.clientY
}, { passive: true })

lb.addEventListener('touchend', (e) => {
  const t = e.changedTouches[0]
  const dx = t.clientX - startX
  const dy = t.clientY - startY

  // 세로 스크롤 방해 안 하려고, 좌우 스와이프만 크게 잡음
  if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy)) {
    if (dx < 0) setLb(current + 1)
    else setLb(current - 1)
  }
})
  </script>
  <div class="lightbox" id="lightbox" aria-hidden="true">
  <button class="lb-close" id="lbClose" aria-label="close">×</button>
  <button class="lb-nav lb-prev" id="lbPrev" aria-label="prev">‹</button>

  <img class="lb-img" id="lbImg" alt="">

  <button class="lb-nav lb-next" id="lbNext" aria-label="next">›</button>
</div>
</body>
</html>
