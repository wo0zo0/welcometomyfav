<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GEONWOO ARCHIVE</title>
  <link rel="stylesheet" href="style.css?v=6">
</head>
<body>
  <button class="menu-btn" aria-label="menu">☰</button>
<button class="logo-btn" aria-label="home">UNNAMED</button>
  <nav class="menu" aria-label="menu">
    <button class="close-btn" aria-label="close">←</button>
    <ul>
      <li><a class="menu-link" href="#selfie">설표셀피</a></li>
      <li><a class="menu-link" href="#songs">PLAYLIST</a></li>
    </ul>
  </nav>

  <main class="content show-content">
  <section id="selfie" class="section">
    <div class="gallery-scroll">
    <h2 class="selfie-title">설표셀피</h2>
      <div class="grid">
        <img src="images/1.JPG">
        <img src="images/2.JPG">
        <img src="images/3.JPG">
        <img src="images/4.JPG">
        <img src="images/5.png">
        <img src="images/6.png">
        <img src="images/7.JPG">
        <img src="images/8.JPG">
      </div>
    </div>
  </section>

  <section id="songs" class="section">
    <h2>PLAYLIST</h2>
    <p>여긴 나중에 채울거임</p>
  </section>
</main>

  <script>
document.addEventListener('DOMContentLoaded', () => {
  document.documentElement.classList.add('show-content')
  const btn = document.querySelector('.menu-btn')
  const menu = document.querySelector('.menu')
  const close = document.querySelector('.close-btn')
  const links = document.querySelectorAll('.menu-link')
  const logoBtn = document.querySelector('.logo-btn')

  // 메뉴 열기/닫기
  if (btn && menu) {
    btn.addEventListener('click', () => menu.classList.add('open'))
  }
  if (close && menu) {
    close.addEventListener('click', () => menu.classList.remove('open'))
  }

  // 섹션 하나만 보이게
  function showOnly(hash) {
    document.querySelectorAll('.section').forEach(sec => {
      sec.style.display = 'none'
    })
    const target = document.querySelector(hash)
    if (target) target.style.display = 'block'
  }

  function openContentAndGo(hash) {
    document.body.classList.add('show-content')
    showOnly(hash)
    const target = document.querySelector(hash)
    setTimeout(() => {
      if (!target) return
      const y = target.getBoundingClientRect().top + window.pageYOffset - 90
      window.scrollTo(0, y)
    }, 50)
  }

  // 메뉴 링크 클릭
  links.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault()
      const hash = link.getAttribute('href')
      if (!hash) return
      if (menu) menu.classList.remove('open')
      history.replaceState(null, "", hash)
      openContentAndGo(hash)
    })
  })

  // 처음부터 해시로 들어온 경우
  if (location.hash) {
    openContentAndGo(location.hash)
  }

  // 로고 누르면 홈(첫화면)
  if (logoBtn) {
    logoBtn.addEventListener('click', () => {
      if (menu) menu.classList.remove('open')
      document.body.classList.remove('show-content')
      history.replaceState(null, "", location.pathname)
      window.scrollTo(0, 0)
    })
  }

  // ===== Lightbox =====
  const lb = document.getElementById('lightbox')
  const lbImg = document.getElementById('lbImg')
  const lbClose = document.getElementById('lbClose')
  const lbPrev = document.getElementById('lbPrev')
  const lbNext = document.getElementById('lbNext')
  const lbCount = document.getElementById('lbCount')
  // lightbox 요소가 없으면 여기서 종료 (메뉴는 계속 정상 작동)
  if (!lb || !lbImg || !lbClose || !lbPrev || !lbNext || !lbCount) return

  let imgs = []
  let current = 0

  function setLb(i) {
    if (!imgs.length) return
    current = (i + imgs.length) % imgs.length
    lbImg.src = imgs[current].src
    lbImg.alt = imgs[current].alt || ''
    lbCount.textContent = (current + 1) + '/' + imgs.length
  }

  function openLbFrom(img) {
    const grid = img.closest('.grid')
    if (!grid) return
    imgs = Array.from(grid.querySelectorAll('img'))
    const idx = imgs.indexOf(img)
    setLb(idx >= 0 ? idx : 0)
    lb.classList.add('open')
    lb.setAttribute('aria-hidden', 'false')
    document.body.style.overflow = 'hidden'
  }

  function closeLb() {
    lb.classList.remove('open')
    lb.setAttribute('aria-hidden', 'true')
    document.body.style.overflow = ''
    lbImg.src = ''
  }

  // 사진 탭하면 열기 (이벤트 위임)
  document.addEventListener('click', (e) => {
    const img = e.target.closest('.grid img')
    if (img) {
      openLbFrom(img)
      return
    }
  })

  lbClose.addEventListener('click', closeLb)
  lbPrev.addEventListener('click', () => setLb(current - 1))
  lbNext.addEventListener('click', () => setLb(current + 1))
let uiHidden = false

lb.addEventListener('click', (e) => {
  // 버튼/X 누른 건 토글하지 말기
  if (e.target.closest('button')) return

  uiHidden = !uiHidden
  lbClose.style.display = uiHidden ? 'none' : 'block'
  lbPrev.style.display = uiHidden ? 'none' : 'block'
  lbNext.style.display = uiHidden ? 'none' : 'block'
  lbCount.style.display = uiHidden ? 'none' : 'block'
})
  // 스와이프
  let startX = 0
  let startY = 0

  lb.addEventListener('touchstart', (e) => {
    const t = e.touches[0]
    startX = t.clientX
    startY = t.clientY
  }, { passive: true })

  lb.addEventListener('touchend', (e) => {
    const t = e.changedTouches[0]
    const dx = t.clientX - startX
    const dy = t.clientY - startY
    if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy)) {
      if (dx < 0) setLb(current + 1)
      else setLb(current - 1)
    }
  })
})
</script>
  <div class="lightbox" id="lightbox" aria-hidden="true">
  <button class="lb-close" id="lbClose" aria-label="close">×</button>
  <button class="lb-nav lb-prev" id="lbPrev" aria-label="prev">‹</button>

  <img class="lb-img" id="lbImg" alt="">
  <div class="lb-count" id="lbCount">1/1</div>
  <button class="lb-nav lb-next" id="lbNext" aria-label="next">›</button>
</div>
</body>
</html>
